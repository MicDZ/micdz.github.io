import{V as _,_ as p,a as f,b as u,c as h,d as g}from"./VRow-BJ6_1tV4.js";import{_ as x,r as y,c as b,o as c,w as a,a as s,b as d,d as w}from"./index-Cxylaijc.js";import{V as D}from"./VSelect-BbuornrK.js";import{V}from"./VBtn-n1ozNjRe.js";import"./VCheckboxBtn-CL7Fx5jn.js";const k={data(){return{data:null,tableData:[],tabulator:null,selectedData:"2024赛季全国赛",dataOptions:["2024赛季全国赛","2024赛季分区赛·中部赛区"],data_final:null,data_center:null}},async beforeCreate(){},mounted(){},async created(){const i=async(t,o=3)=>{for(let l=0;l<o;l++)try{const e=await fetch(t);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){if(l===o-1)throw e;await new Promise(r=>setTimeout(r,1e3))}};try{[this.data_final,this.data_center,this.logo_maps]=await Promise.all([i("/rmdatabase/data.json"),i("/rmdatabase/data_center.json"),i("/rmdatabase/college_names_logo_maps.json")]),console.log(this.data_final),console.log(this.data_center),console.log(this.logo_maps)}catch(t){console.error("Failed to load data:",t)}this.updateData()},methods:{updateData(){this.selectedData=="2024赛季全国赛"?(this.tableData=[],this.data=this.data_final):this.selectedData=="2024赛季分区赛·中部赛区"&&(this.tableData=[],this.data=this.data_center),console.log(this.data);const i=this.data.sort((l,e)=>l.id-e.id);for(const l of i)for(const e of l.data){var t,o;o=l.id.substring(5),l.id.includes("F")?t="全国赛":l.id.includes("C")?t="中部赛区":t="未知赛区",this.tableData.push({id_name:t+"第"+o+"场第"+(l.data.indexOf(e)+1)+"局",id:l.id,index:l.data.indexOf(e),blue:l.blue,red:l.red,blue_base:e.blue.base,blue_money:e.blue.money,blue_damage:e.blue.damage,blue_kill:e.blue.kill,blue_bullet_big:e.blue.bullet.split("/")[0],blue_bullet_small:e.blue.bullet.split("/")[1],blue_long_shot:e.blue.long_shot,blue_duff:e.blue.duff,blue_drone:e.blue.drone,blue_dart:e.blue.dart,blue_radar:e.blue.radar,red_base:e.red.base,red_money:e.red.money,red_damage:e.red.damage,red_kill:e.red.kill,red_bullet_big:e.red.bullet.split("/")[0],red_bullet_small:e.red.bullet.split("/")[1],red_long_shot:e.red.long_shot,red_duff:e.red.duff,red_drone:e.red.drone,red_dart:e.red.dart,red_radar:e.red.radar})}this.tabulator=new Tabulator("#table",{data:this.tableData,layout:"fitDataTable",columnVertAlign:"bottom",maxWidth:"100%",columns:[{title:"操作",formatter:"html",cellClick:(function(l,e){var r=e.getRow().getData().id,n=e.getRow().getData().index;this.$router.push({path:"/detail/"+r+"R"+n})}).bind(this),formatter:function(){return"<span style='color: #1976D2; cursor: pointer;'>查看详情</span>"}},{title:"比赛ID",field:"id_name"},{title:"红方",field:"red"},{title:"蓝方",field:"blue"},{title:"红方基地血量",field:"red_base"},{title:"红方经济",field:"red_money"},{title:"红方伤害",field:"red_damage"},{title:"红方击毁数",field:"red_kill"},{title:"红方大弹丸数",field:"red_bullet_big"},{title:"红方小弹丸数",field:"red_bullet_small"},{title:"红方吊射",field:"red_long_shot"},{title:"红方大小能量机关",field:"red_duff"},{title:"红方无人机",field:"red_drone"},{title:"红方飞镖",field:"red_dart"},{title:"红方雷达",field:"red_radar"},{title:"蓝方基地血量",field:"blue_base"},{title:"蓝方经济",field:"blue_money"},{title:"蓝方伤害",field:"blue_damage"},{title:"蓝方击毁数",field:"blue_kill"},{title:"蓝方大弹丸数",field:"blue_bullet_big"},{title:"蓝方小弹丸数",field:"blue_bullet_small"},{title:"蓝方吊射",field:"blue_long_shot"},{title:"蓝方大小能量机关",field:"blue_duff"},{title:"蓝方无人机",field:"blue_drone"},{title:"蓝方飞镖",field:"blue_dart"},{title:"蓝方雷达",field:"blue_radar"}]})}}},v={class:"mb-8 text-center",style:{width:"100%","max-width":"900px"}},C={class:"ml-6"};function j(i,t,o,l,e,r){const n=y("router-link");return c(),b(g,{class:"fill-height d-flex flex-column align-center justify-center"},{default:a(()=>[s("div",v,[d(n,{to:"/",style:{"text-decoration":"none",color:"inherit"}},{default:a(()=>[d(_,{height:"50",src:p})]),_:1})]),d(f,{class:"w-100",style:{"max-width":"1200px"},justify:"center"},{default:a(()=>[d(u,{cols:"12",class:"pa-0"},{default:a(()=>[d(h,{class:"py-4 w-100",color:"surface-variant","prepend-icon":"mdi-rocket-launch-outline",rounded:"lg",variant:"tonal"},{image:a(()=>[d(_,{position:"top right"})]),title:a(()=>t[1]||(t[1]=[s("h2",{class:"text-h5 font-weight-bold"}," 历史比赛数据查询 ",-1)])),subtitle:a(()=>t[2]||(t[2]=[s("div",{class:"text-subtitle-1"}," 目前支持2024赛季全国赛和中部赛区比赛数据 ",-1)])),default:a(()=>[s("div",C,[d(f,null,{default:a(()=>[d(u,{cols:"5"},{default:a(()=>[d(D,{modelValue:e.selectedData,"onUpdate:modelValue":t[0]||(t[0]=m=>e.selectedData=m),items:e.dataOptions,label:"选择数据",outlined:"",dense:""},null,8,["modelValue","items"])]),_:1}),d(u,{cols:"2"},{default:a(()=>[d(V,{onClick:r.updateData,color:"primary",class:"mt-2"},{default:a(()=>t[3]||(t[3]=[w("加载数据")])),_:1},8,["onClick"])]),_:1})]),_:1})]),t[4]||(t[4]=s("div",{style:{"max-width":"100%",display:"flex","justify-content":"center"},class:"pa-3"},[s("div",{id:"table",style:{"max-width":"100%","overflow-x":"auto"}})],-1))]),_:1})]),_:1})]),_:1})]),_:1})}const T=x(k,[["render",j]]),$={__name:"history",setup(i){return(t,o)=>{const l=T;return c(),b(l)}}};export{$ as default};
