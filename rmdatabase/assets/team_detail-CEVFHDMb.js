import{u as R,m as U,V as O,_ as q,a as j,b,c as z,d as G}from"./VRow-CnA4svvl.js";import{g as J,p as K,e as Q,u as W,b as u,m as X,f as Y,h as Z,i as $,_ as aa,r as ta,c as x,o as v,w as m,a as c,j as k,F as P,k as E,d as N,l as S,t as y}from"./index-l3KOmizz.js";import{V as ea}from"./VCheckboxBtn-CBjJ_giP.js";import{V as sa}from"./VBtn-CM6WFfh5.js";const oa=K({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,...Z(),...U(),...Y(),...X()},"VTable"),la=J()({name:"VTable",props:oa(),setup(o,h){let{slots:l,emit:p}=h;const{themeClasses:i}=Q(o),{densityClasses:g}=R(o);return W(()=>u(o.tag,{class:["v-table",{"v-table--fixed-height":!!o.height,"v-table--fixed-header":o.fixedHeader,"v-table--fixed-footer":o.fixedFooter,"v-table--has-top":!!l.top,"v-table--has-bottom":!!l.bottom,"v-table--hover":o.hover},i.value,g.value,o.class],style:o.style},{default:()=>{var f,n,r;return[(f=l.top)==null?void 0:f.call(l),l.default?u("div",{class:"v-table__wrapper",style:{height:$(o.height)}},[u("table",null,[l.default()])]):(n=l.wrapper)==null?void 0:n.call(l),(r=l.bottom)==null?void 0:r.call(l)]}})),{}}}),na={data(){return{data:null,data_final:null,data_center:null,logo_maps:null,tableData:[],tabulator:null,school_data:{},school_data_average:{},school_logo:null,team_name:"",rank_data:{},name_maps:{base:"基地",damage:"伤害",money:"经济",long_shot:"吊射",bullet_big:"大弹丸数",bullet_small:"小弹丸数",kill:"击杀",duff:"大小能量机关",radar:"雷达",drone:"无人机",dart:"飞镖",经济伤害转化率:"经济伤害转化率",吊射效率:"吊射效率",伤害转换效率:"伤害转换效率"},data_scope:null,selected_scopes:["全国赛"],chartOption:{color:["#67F9D8","#FFE434","#56A3F1","#FF917C"],title:{},legend:{},radar:[{indicator:[{text:"辅瞄",max:.5},{text:"战术",max:.5},{text:"经济",max:5e3},{text:"远程",max:1},{text:"稳定性",max:32}],center:["50%","50%"],radius:120,startAngle:90,splitNumber:4,shape:"circle",axisName:{formatter:"{value}",color:"#428BD4"},splitArea:{areaStyle:{color:["#77EADF","#26C3BE","#64AFE9","#428BD4"],shadowColor:"rgba(0, 0, 0, 0.2)",shadowBlur:10}},axisLine:{lineStyle:{color:"rgba(211, 253, 250, 0.8)"}},splitLine:{lineStyle:{color:"rgba(211, 253, 250, 0.8)"}}}],series:[{type:"radar",emphasis:{lineStyle:{width:4}},data:[{value:[100,100,100,100,100],name:"",areaStyle:{color:"rgba(255, 228, 52, 0.6)"}}]}]}}},async mounted(){this.team_name=this.$route.params.name,await this.updateData();for(const o of Object.keys(this.logo_maps))this.team_name.includes(o)&&(this.school_logo=this.logo_maps[o])},methods:{async updateData(){var V,C,F,B,T;const o=async(a,t=3)=>{for(let e=0;e<t;e++)try{const s=await fetch(a);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()}catch(s){if(e===t-1)throw s;await new Promise(M=>setTimeout(M,1e3))}};try{[this.data_final,this.data_center,this.logo_maps]=await Promise.all([o("/rmdatabase/data.json"),o("/rmdatabase/data_center.json"),o("/rmdatabase/college_names_logo_maps.json")]),this.data_scope={全国赛:this.data_final,中部赛区:this.data_center}}catch(a){console.error("Failed to load data:",a)}this.data=[],this.school_data={},this.school_data_average={},this.tableData=[],this.rank_data={};for(const a of this.selected_scopes)for(const t in this.data_scope[a])this.data.push(this.data_scope[a][t]);var h=this.data.sort((a,t)=>a.id-t.id),l=[];for(const a of h){var p={};p.id=a.id,p.blue=a.blue,p.red=a.red,p.data=[];for(const t of a.data){var i={};i.blue=t.blue,i.red=t.red;for(const e in t)for(const s in t[e])if(s=="bullet"){var g=t[e][s].split("/");i[e].bullet_big=g[0],i[e].bullet_small=g[1],delete i[e][s]}else i[e][s]=t[e][s];p.data.push(i)}l.push(p)}for(const a of l){var f=a.blue,n=a.red;f=f.trim(),n=n.trim(),this.school_data[f]||(this.school_data[f]={name:f,data:{}}),this.school_data[n]||(this.school_data[n]={name:n,data:{}});for(const t of a.data)for(const e in t){if(e=="blue")for(const s in t[e])this.school_data[f].data[s]||(this.school_data[f].data[s]=[]),this.school_data[f].data[s].push(t[e][s]);if(e=="red")for(const s in t[e])this.school_data[n].data[s]||(this.school_data[n].data[s]=[]),this.school_data[n].data[s].push(t[e][s])}}for(const a in this.school_data){this.school_data_average[a]={name:this.school_data[a].name,data:{}};for(const t in this.school_data[a].data){var r=0;for(const e of this.school_data[a].data[t])r+=parseInt(e);this.school_data_average[a].data[t]=r/this.school_data[a].data[t].length}}for(const a in this.school_data)for(const t in this.school_data[a].data){var r=0;for(const s of this.school_data[a].data[t])r+=Math.pow(parseInt(s)-this.school_data_average[a].data[t],2);this.school_data_average[a].data[t+"_std"]=Math.sqrt(r/this.school_data[a].data[t].length)}for(const a in this.school_data_average){var d={};d.name=this.school_data_average[a].name;for(const t in this.school_data_average[a].data)d[t]=this.school_data_average[a].data[t];d.经济伤害转化率=d.damage/d.money,d.吊射效率=d.long_shot/d.bullet_big,d.伤害转换效率=d.damage/(d.bullet_big*200+d.bullet_small*10),this.tableData.push(d)}for(const a in this.tableData)if(this.tableData[a].name==this.team_name){for(const t in this.tableData[a])if(t!="name"){this.rank_data[t]={rank:1,value:this.tableData[a][t]};for(const e in this.tableData)this.tableData[e].name==this.team_name||!this.tableData[e].name.includes("战队")||this.tableData[e][t]>this.tableData[a][t]&&this.rank_data[t].rank++}}var A=0;for(const a in this.rank_data)this.rank_data[a].rank>0&&(A+=this.rank_data[a].rank);var _={};for(const a in this.tableData)for(const t in this.tableData[a])t!="name"&&(_[t]||(_[t]=0),this.tableData[a][t]>_[t]&&(_[t]=this.tableData[a][t]));for(const a in this.tableData)for(const t in this.tableData[a])t!="name"&&t.includes("std")&&(this.tableData[a][t]=this.tableData[a][t]/_[t]);var I=0;for(const a in _)a.includes("std")&&(I+=_[a]);var w=0,D=0;for(const a in this.rank_data)a.includes("std")&&(this.rank_data[a].value=this.rank_data[a].value/_[a],w+=this.rank_data[a].value,D++);this.chartOption.radar[0].indicator[0].max=_.伤害转换效率,this.chartOption.radar[0].indicator[1].max=_.经济伤害转化率,this.chartOption.radar[0].indicator[2].max=_.money,this.chartOption.radar[0].indicator[3].max=_.long_shot+_.dart,this.chartOption.radar[0].indicator[4].max=1,this.chartOption.series[0].data[0].value=[(V=this.rank_data.伤害转换效率)==null?void 0:V.value,(C=this.rank_data.经济伤害转化率)==null?void 0:C.value,(F=this.rank_data.money)==null?void 0:F.value,((B=this.rank_data.long_shot)==null?void 0:B.value)+((T=this.rank_data.dart)==null?void 0:T.value),1-w/D];var H=document.getElementById("radarChart"),L=echarts.init(H);L.setOption(this.chartOption)}}},ia={class:"mb-8 text-center",style:{width:"100%","max-width":"900px"}},ra={class:"text-h5 font-weight-bold"},ha={class:"ml-6"},da={class:"px-4",style:{width:"100%"}},ca={key:0},ua={key:0},fa={key:1},_a={key:2};function ma(o,h,l,p,i,g){const f=ta("router-link");return v(),x(G,{class:"fill-height d-flex flex-column align-center justify-center"},{default:m(()=>[c("div",ia,[u(f,{to:"/",style:{"text-decoration":"none",color:"inherit"}},{default:m(()=>[u(O,{height:"50",src:q})]),_:1})]),u(j,{class:"w-100",style:{"max-width":"1200px"},justify:"center"},{default:m(()=>[u(b,{cols:"12",class:"pa-0"},{default:m(()=>[u(z,{class:"py-4 w-100",color:"surface-variant","prepend-icon":"mdi-rocket-launch-outline",rounded:"lg",variant:"tonal"},{image:m(()=>[u(O,{src:i.school_logo,height:"100px",position:"top right",class:"mr-12 mt-8"},null,8,["src"])]),title:m(()=>[u(j,null,{default:m(()=>[u(b,{cols:"10"},{default:m(()=>[c("h3",ra,y(this.team_name),1)]),_:1}),u(b,{cols:"2",class:"d-flex justify-center"})]),_:1})]),subtitle:m(()=>h[1]||(h[1]=[c("div",{class:"text-subtitle-1"}," 多纬度数据排名 ",-1)])),default:m(()=>[c("div",ha,[(v(!0),k(P,null,E(i.data_scope,(n,r)=>(v(),x(ea,{modelValue:i.selected_scopes,"onUpdate:modelValue":h[0]||(h[0]=d=>i.selected_scopes=d),label:r,value:r,key:r,density:"compact",class:"mx-2","hide-details":""},null,8,["modelValue","label","value"]))),128)),u(sa,{class:"mt-4 mr-9",color:"primary",onClick:g.updateData,style:{"margin-left":"20px"}},{default:m(()=>h[2]||(h[2]=[N(" 查询数据 ")])),_:1},8,["onClick"])]),c("div",da,[u(la,{style:{width:"100%"},class:"pa-4"},{default:m(()=>[h[3]||(h[3]=c("thead",null,[c("tr",null,[c("th",{class:"text-left"},"指标"),c("th",{class:"text-left"},"排名"),c("th",{class:"text-left"},"数据")])],-1)),(v(!0),k(P,null,E(i.rank_data,(n,r)=>(v(),k("tbody",{key:r},[i.name_maps[r]?(v(),k("tr",ca,[c("td",null,y(i.name_maps[r]),1),c("td",null,[N(" #"+y(n.rank)+" ",1),n.rank===1?(v(),k("span",ua,"🥇")):n.rank===2?(v(),k("span",fa,"🥈")):n.rank===3?(v(),k("span",_a,"🥉")):S("",!0)]),c("td",null,y(n.value.toFixed(2)),1)])):S("",!0)]))),128))]),_:1})]),h[4]||(h[4]=c("div",{id:"radarChart",style:{width:"100%",height:"400px"}},null,-1))]),_:1})]),_:1})]),_:1})]),_:1})}const pa=aa(na,[["render",ma]]),ba={__name:"team_detail",setup(o){return(h,l)=>{const p=pa;return v(),x(p)}}};export{ba as default};
