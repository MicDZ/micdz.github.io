import{V as b,_ as y,a as f,b as m,c as w,d as v}from"./VRow-DT3uGSbJ.js";import{_ as D,r as k,c as p,o as g,w as s,a as n,b as o,d as j,t as c}from"./index-BNgA63_7.js";import{V}from"./VBtn-mYe31tDE.js";const C={data(){return{data:null,data_final:null,data_center:null,logo_maps:null,tableData:[],tabulator:null,selectedData:null,redLogoPath:"",blueLogoPath:"",round_index:0}},async created(){},async beforeMount(){},async mounted(){const d=async(t,e=3)=>{for(let l=0;l<e;l++)try{const _=await fetch(t);if(!_.ok)throw new Error(`HTTP error! status: ${_.status}`);return await _.json()}catch(_){if(l===e-1)throw _;await new Promise(x=>setTimeout(x,1e3))}};try{[this.data_final,this.data_center,this.logo_maps]=await Promise.all([d("/rmdatabase/data.json"),d("/rmdatabase/data_center.json"),d("/rmdatabase/college_names_logo_maps.json")])}catch(t){console.error("Failed to load data:",t)}this.$route.params.id.includes("2024C")?this.data=this.data_center:this.data=this.data_final;const a=this.data.sort((t,e)=>t.id-e.id);for(const t of a)for(const e of t.data)if(console.log(t.id),console.log(this.$route.params.id.substring(0,this.$route.params.id.indexOf("R"))),this.$route.params.id.substring(0,this.$route.params.id.indexOf("R"))==t.id){var i,u;for(const l of Object.keys(this.logo_maps))t.blue.includes(l)&&(this.blueLogoPath=this.logo_maps[l]),t.red.includes(l)&&(this.redLogoPath=this.logo_maps[l]);u=t.id.substring(5,t.id.indexOf("R")),this.round_index=this.$route.params.id.substring(this.$route.params.id.indexOf("R")+1),console.log(this.$route.params.id),console.log(this.round_index),t.id.includes("F")?i="全国赛":t.id.includes("C")?i="中部赛区":i="未知赛区",t.blue=t.blue.trim(),t.red=t.red.trim(),this.tableData.push({id_name:i+"第"+u+"场第"+(t.data.indexOf(e)+1)+"局",blue:t.blue,red:t.red,blue_base:e.blue.base,blue_money:e.blue.money,blue_damage:e.blue.damage,blue_kill:e.blue.kill,blue_bullet_big:e.blue.bullet.split("/")[0],blue_bullet_small:e.blue.bullet.split("/")[1],blue_long_shot:e.blue.long_shot,blue_duff:e.blue.duff,blue_drone:e.blue.drone,blue_dart:e.blue.dart,blue_radar:e.blue.radar,red_base:e.red.base,red_money:e.red.money,red_damage:e.red.damage,red_kill:e.red.kill,red_bullet_big:e.red.bullet.split("/")[0],red_bullet_small:e.red.bullet.split("/")[1],red_long_shot:e.red.long_shot,red_duff:e.red.duff,red_drone:e.red.drone,red_dart:e.red.dart,red_radar:e.red.radar})}const h=[{name:"基地血量",blue:"blue_base",red:"red_base"},{name:"经济",blue:"blue_money",red:"red_money"},{name:"伤害",blue:"blue_damage",red:"red_damage"},{name:"击毁数",blue:"blue_kill",red:"red_kill"},{name:"大弹丸数",blue:"blue_bullet_big",red:"red_bullet_big"},{name:"小弹丸数",blue:"blue_bullet_small",red:"red_bullet_small"},{name:"远程打击",blue:"blue_long_shot",red:"red_long_shot"},{name:"大小能量机关",blue:"blue_duff",red:"red_duff"},{name:"无人机",blue:"blue_drone",red:"red_drone"},{name:"飞镖",blue:"blue_dart",red:"red_dart"},{name:"雷达",blue:"blue_radar",red:"red_radar"}].map(t=>({metric:t.name,blue_value:this.tableData[this.round_index][t.blue],red_value:this.tableData[this.round_index][t.red]}));this.tabulator=new Tabulator("#table",{data:h,layout:"fitDataTable",columnVertAlign:"middle",maxWidth:"100%",columns:[{title:"数据项",field:"metric",headerSort:!1,width:120},{title:"红方 - "+this.tableData[this.round_index].red,field:"red_value",headerSort:!1,hozAlign:"center"},{title:"蓝方 - "+this.tableData[this.round_index].blue,field:"blue_value",headerSort:!1,hozAlign:"center"}]})}},P={class:"mb-8 text-center",style:{width:"100%","max-width":"900px"}},$={class:"text-h5 font-weight-bold"},L={class:"text-subtitle-1"},O={style:{"max-width":"100%",display:"flex","justify-content":"right"}};function T(d,a,i,u,r,h){const t=k("router-link");return g(),p(v,{class:"fill-height d-flex flex-column align-center justify-center"},{default:s(()=>[n("div",P,[o(t,{to:"/",style:{"text-decoration":"none",color:"inherit"}},{default:s(()=>[o(b,{height:"50",src:y})]),_:1})]),o(f,{class:"w-100",style:{"max-width":"1200px"},justify:"center"},{default:s(()=>[o(m,{cols:"12",class:"pa-0"},{default:s(()=>[o(w,{class:"py-4 w-100",color:"surface-variant","prepend-icon":"mdi-rocket-launch-outline",rounded:"lg",variant:"tonal"},{image:s(()=>[o(b,{position:"top right"})]),title:s(()=>{var e,l;return[n("h2",$,c(((e=r.tableData[r.round_index])==null?void 0:e.red)||"加载中")+" vs "+c(((l=r.tableData[r.round_index])==null?void 0:l.blue)||"加载中"),1)]}),subtitle:s(()=>{var e;return[n("div",L,c(((e=r.tableData[r.round_index])==null?void 0:e.id_name)||"对局不存在"),1)]}),default:s(()=>[o(f,{justify:"center",class:"mb-4"},{default:s(()=>[o(m,{cols:"6",class:"d-flex justify-center"},{default:s(()=>[o(b,{src:r.redLogoPath,"max-width":"100px",style:{cursor:"pointer"},onClick:a[0]||(a[0]=e=>{var l;return d.$router.push({path:"/team_detail/"+((l=r.tableData[r.round_index])==null?void 0:l.red)})})},null,8,["src"])]),_:1}),o(m,{cols:"6",class:"d-flex justify-center"},{default:s(()=>[o(b,{src:r.blueLogoPath,"max-width":"100px",style:{cursor:"pointer"},onClick:a[1]||(a[1]=e=>{var l;return d.$router.push({path:"/team_detail/"+((l=r.tableData[r.round_index])==null?void 0:l.blue)})})},null,8,["src"])]),_:1})]),_:1}),a[4]||(a[4]=n("div",{style:{"max-width":"100%",display:"flex","justify-content":"center"}},[n("div",{id:"table",style:{"max-width":"100%","overflow-x":"auto"}})],-1)),n("div",O,[o(V,{class:"mt-4 mr-9",color:"primary",onClick:a[2]||(a[2]=e=>d.$router.push({path:"/history"})),style:{"margin-left":"20px"},"prepend-icon":"mdi-arrow-left"},{default:s(()=>a[3]||(a[3]=[j("返回")])),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})}const R=D(C,[["render",T]]),N={__name:"detail",setup(d){return(a,i)=>{const u=R;return g(),p(u)}}};export{N as default};
