import{V as b,_ as y,a as f,b as m,c as w,d as D}from"./VRow-CnA4svvl.js";import{_ as v,r as k,c as p,o as g,w as r,a as n,b as s,d as j,t as c}from"./index-l3KOmizz.js";import{V}from"./VBtn-CM6WFfh5.js";const C={data(){return{data:null,data_final:null,data_center:null,logo_maps:null,tableData:[],tabulator:null,selectedData:null,redLogoPath:"",blueLogoPath:"",round_index:0}},async created(){},async beforeMount(){},async mounted(){const o=async(t,e=3)=>{for(let d=0;d<e;d++)try{const _=await fetch(t);if(!_.ok)throw new Error(`HTTP error! status: ${_.status}`);return await _.json()}catch(_){if(d===e-1)throw _;await new Promise(x=>setTimeout(x,1e3))}};try{[this.data_final,this.data_center,this.logo_maps]=await Promise.all([o("/rmdatabase/data.json"),o("/rmdatabase/data_center.json"),o("/rmdatabase/college_names_logo_maps.json")])}catch(t){console.error("Failed to load data:",t)}this.$route.params.id.includes("2024C")?this.data=this.data_center:this.data=this.data_final;const l=this.data.sort((t,e)=>t.id-e.id);for(const t of l)for(const e of t.data)if(this.$route.params.id.substring(0,this.$route.params.id.indexOf("R"))==t.id){var i,u;for(const d of Object.keys(this.logo_maps))t.blue.includes(d)&&(this.blueLogoPath=this.logo_maps[d]),t.red.includes(d)&&(this.redLogoPath=this.logo_maps[d]);u=t.id.substring(5,t.id.indexOf("R")),this.round_index=this.$route.params.id.substring(this.$route.params.id.indexOf("R")+1),t.id.includes("F")?i="全国赛":t.id.includes("C")?i="中部赛区":i="未知赛区",t.blue=t.blue.trim(),t.red=t.red.trim(),this.tableData.push({id_name:i+"第"+u+"场第"+(t.data.indexOf(e)+1)+"局",blue:t.blue,red:t.red,blue_base:e.blue.base,blue_money:e.blue.money,blue_damage:e.blue.damage,blue_kill:e.blue.kill,blue_bullet_big:e.blue.bullet.split("/")[0],blue_bullet_small:e.blue.bullet.split("/")[1],blue_long_shot:e.blue.long_shot,blue_duff:e.blue.duff,blue_drone:e.blue.drone,blue_dart:e.blue.dart,blue_radar:e.blue.radar,red_base:e.red.base,red_money:e.red.money,red_damage:e.red.damage,red_kill:e.red.kill,red_bullet_big:e.red.bullet.split("/")[0],red_bullet_small:e.red.bullet.split("/")[1],red_long_shot:e.red.long_shot,red_duff:e.red.duff,red_drone:e.red.drone,red_dart:e.red.dart,red_radar:e.red.radar}),console.log(this.tableData[this.round_index].red),console.log(this.tableData[this.round_index].blue)}const h=[{name:"基地血量",blue:"blue_base",red:"red_base"},{name:"经济",blue:"blue_money",red:"red_money"},{name:"伤害",blue:"blue_damage",red:"red_damage"},{name:"击毁数",blue:"blue_kill",red:"red_kill"},{name:"大弹丸数",blue:"blue_bullet_big",red:"red_bullet_big"},{name:"小弹丸数",blue:"blue_bullet_small",red:"red_bullet_small"},{name:"远程打击",blue:"blue_long_shot",red:"red_long_shot"},{name:"大小能量机关",blue:"blue_duff",red:"red_duff"},{name:"无人机",blue:"blue_drone",red:"red_drone"},{name:"飞镖",blue:"blue_dart",red:"red_dart"},{name:"雷达",blue:"blue_radar",red:"red_radar"}].map(t=>({metric:t.name,blue_value:this.tableData[this.round_index][t.blue],red_value:this.tableData[this.round_index][t.red]}));this.tabulator=new Tabulator("#table",{data:h,layout:"fitDataTable",columnVertAlign:"middle",maxWidth:"100%",columns:[{title:"数据项",field:"metric",headerSort:!1,width:120},{title:"红方 - "+this.tableData[this.round_index].red,field:"red_value",headerSort:!1,hozAlign:"center"},{title:"蓝方 - "+this.tableData[this.round_index].blue,field:"blue_value",headerSort:!1,hozAlign:"center"}]})}},P={class:"mb-8 text-center",style:{width:"100%","max-width":"900px"}},L={class:"text-h5 font-weight-bold"},T={class:"text-subtitle-1"},O={style:{"max-width":"100%",display:"flex","justify-content":"right"}};function $(o,l,i,u,a,h){const t=k("router-link");return g(),p(D,{class:"fill-height d-flex flex-column align-center justify-center"},{default:r(()=>[n("div",P,[s(t,{to:"/",style:{"text-decoration":"none",color:"inherit"}},{default:r(()=>[s(b,{height:"50",src:y})]),_:1})]),s(f,{class:"w-100",style:{"max-width":"1200px"},justify:"center"},{default:r(()=>[s(m,{cols:"12",class:"pa-0"},{default:r(()=>[s(w,{class:"py-4 w-100",color:"surface-variant","prepend-icon":"mdi-rocket-launch-outline",rounded:"lg",variant:"tonal"},{image:r(()=>[s(b,{position:"top right"})]),title:r(()=>{var e,d;return[n("h2",L,c(((e=a.tableData[a.round_index])==null?void 0:e.red)||"加载中")+" vs "+c(((d=a.tableData[a.round_index])==null?void 0:d.blue)||"加载中"),1)]}),subtitle:r(()=>{var e;return[n("div",T,c(((e=a.tableData[a.round_index])==null?void 0:e.id_name)||"对局不存在"),1)]}),default:r(()=>[s(f,{justify:"center",class:"mb-4"},{default:r(()=>[s(m,{cols:"6",class:"d-flex justify-center"},{default:r(()=>[s(b,{src:a.redLogoPath,"max-width":"100px",style:{cursor:"pointer"},onClick:l[0]||(l[0]=e=>o.$router.push({path:"/team_detail/"+a.tableData[a.round_index].red}))},null,8,["src"])]),_:1}),s(m,{cols:"6",class:"d-flex justify-center"},{default:r(()=>[s(b,{src:a.blueLogoPath,"max-width":"100px",style:{cursor:"pointer"},onClick:l[1]||(l[1]=e=>o.$router.push({path:"/team_detail/"+a.tableData[a.round_index].blue}))},null,8,["src"])]),_:1})]),_:1}),l[4]||(l[4]=n("div",{style:{"max-width":"100%",display:"flex","justify-content":"center"}},[n("div",{id:"table",style:{"max-width":"100%","overflow-x":"auto"}})],-1)),n("div",O,[s(V,{class:"mt-4 mr-9",color:"primary",onClick:l[2]||(l[2]=e=>o.$router.push({path:"/history"})),style:{"margin-left":"20px"},"prepend-icon":"mdi-arrow-left"},{default:r(()=>l[3]||(l[3]=[j("返回")])),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})}const B=v(C,[["render",$]]),N={__name:"detail",setup(o){return(l,i)=>{const u=B;return g(),p(u)}}};export{N as default};
