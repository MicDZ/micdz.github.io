<!DOCTYPE html><html lang="en,zh_cn,default"><head>
  <meta charset="utf-8">
  
  <title>友链 - MicDZ</title>

  
<link rel="stylesheet" href="/css/custom.css">

  
<link rel="stylesheet" href="/css/main.css">

  
<link rel="stylesheet" href="/css/normalize.css">

  <style>
  /* stylelint-disable */
  a:not(.icon):not(.clustrmaps-map-control):not(.formula-anchor) {
    text-decoration-color: #000;
  }
  a:hover:not(.icon):not(.clustrmaps-map-control):not(.formula-anchor),
  a:focus:not(.icon):not(.clustrmaps-map-control):not(.formula-anchor) {
    text-decoration-color: #111;
  }
  blockquote {
    border-left: 8px solid #0FA0CE;
  }
  .nanobar .bar {
    background: #0FA0CE;
  }
  /* stylelint-enable */
</style>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/png" href="/img/h.jpeg">
  <link rel="stylesheet" href="https://cdn.jsdmirror.com
/npm/lxgw-wenkai-webfont@1.1.0/style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
  <!-- KaTeX support -->
  <link rel="stylesheet" href="https://cdn.jsdmirror.com
/npm/katex@0.16.9/dist/katex.css" integrity="sha384-OH8qNTHoMMVNVcKdKewlipV4SErXqccxxlg6HC9Cwjr5oZu2AdBej1TndeCirael" crossorigin="anonymous">
<script defer="" src="https://cdn.jsdmirror.com
/npm/katex@0.16.9/dist/katex.js" integrity="sha384-ImWHyYvDPlRzwFnvLhG9Jcpm/7qL4SVIuJK0C6Rj+Mf7fpeNJCLCynC+EVz4kCSA" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.js" integrity="sha512-EKW5YvKU3hpyyOcN6jQnAxO/L8gts+YdYV6Yymtl8pk9YlYFtqJgihORuRoBXK8/cOIlappdU6Ms8KdK6yBCgA==" crossorigin="anonymous" referrerpolicy="no-referrer">
</script>
<link rel="stylesheet" href="https://cdn.jsdmirror.com
/npm/pseudocode@2.4.1/build/pseudocode.min.css">
<script src="https://cdn.jsdmirror.com
/npm/pseudocode@2.4.1/build/pseudocode.min.js">
</script>

<!-- Prism support ./js/prism.js-->
  
<link rel="stylesheet" href="/css/prism.css">

<meta name="generator" content="Hexo 7.0.0"><link rel="alternate" href="/atom.xml" title="MicDZ's Blog" type="application/atom+xml">
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="row">

    <div class="two columns" style="max-width: 50px">
      <h1 class="mt-2 mode">
        <div onclick="setDarkMode(true)" id="darkBtn"></div>
        <div onclick="setDarkMode(false)" id="lightBtn" class="hidden"></div>
        <script>
          if (localStorage.getItem('preferredTheme') == 'dark') {
            setDarkMode(true)
          }
          function setDarkMode(isDark) {
            var darkBtn = document.getElementById('darkBtn')
            var lightBtn = document.getElementById('lightBtn')
            if (isDark) {
              lightBtn.style.display = "block"
              darkBtn.style.display = "none"
              localStorage.setItem('preferredTheme', 'dark');
            } else {
              lightBtn.style.display = "none"
              darkBtn.style.display = "block"
              localStorage.removeItem('preferredTheme');
            }
            document.body.classList.toggle("darkmode");
          }
        </script>
      </h1>
    </div>
     
    <div class="six columns ml-1">
      <h1 class="mt-2 site-title">
        MicDZ's Blog
      </h1>
    </div>
  
    <div class="twelve columns">
      <div class="row">
        <div class="right">
          
          <a href="/cn" class="ml">主页</a>
          
          
          
            <a href="/cn/archives.html" class="ml">文章</a>
             

          <!-- <a href="/" class="ml">关于</a> -->
          
            <a href="/cn/friends.html" class="ml">友链</a>
             
          
          
        </div>
      </div>
      <hr style="margin-bottom: 2.6rem">
    </div>
    


  </div>
          <div>
            <!-- <div class="trans"> -->
              

<title>友链</title>

<div class="article">
  
  
  
<h2 class="no-number"> 华科的朋友</h2>
<div class="site-list">
<div class="site-card">
<img no-lazy="" class="avatar" src="https://pic1.imgdb.cn/item/67b6faa9d0e0a243d40102f5.jpg" onerror="javascript:this.classList.add('error');this.src='https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/image/2659360.svg';">
<a target="_blank" rel="noopener" href="http://www.chineloong.cn/">沐泽</a>
</div>
<div class="site-card">
<img no-lazy="" class="avatar" src="https://pic1.imgdb.cn/item/67b71efcd0e0a243d4010c28.jpg" onerror="javascript:this.classList.add('error');this.src='https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/image/2659360.svg';">
<a target="_blank" rel="noopener" href="http://lyklbw.github.io/">lyklbw</a>
</div>
<div class="site-card">
<img no-lazy="" class="avatar" src="https://pic1.imgdb.cn/item/68a6e0f458cb8da5c840ec45.webp" onerror="javascript:this.classList.add('error');this.src='https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/image/2659360.svg';">
<a target="_blank" rel="noopener" href="http://motues.top">motues</a>
</div>
<div class="site-card">
<img no-lazy="" class="avatar" src="https://avatars.githubusercontent.com/q-mian" onerror="javascript:this.classList.add('error');this.src='https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/image/2659360.svg';">
<a target="_blank" rel="noopener" href="https://qmian.online/">Qmian</a>
</div>
</div>
<h2 class="no-number"> 长郡的朋友</h2>
<div class="site-list">
<div class="site-card">
<img no-lazy="" class="avatar" src="https://pic.imgdb.cn/item/6305e72016f2c2beb18c985a.jpg" onerror="javascript:this.classList.add('error');this.src='https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/image/2659360.svg';">
<a target="_blank" rel="noopener" href="https://www.cnblogs.com/Xx-queue">Xx_queue</a>
</div>
<div class="site-card">
<img no-lazy="" class="avatar" src="https://pic.imgdb.cn/item/6305e73716f2c2beb18ca877.jpg" onerror="javascript:this.classList.add('error');this.src='https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/image/2659360.svg';">
<a target="_blank" rel="noopener" href="https://www.cnblogs.com/IcedMoon/">_YYY_</a>
</div>
<div class="site-card">
<img no-lazy="" class="avatar" src="https://pic.imgdb.cn/item/6305e74116f2c2beb18cb0b1.png" onerror="javascript:this.classList.add('error');this.src='https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/image/2659360.svg';">
<a target="_blank" rel="noopener" href="https://www.cnblogs.com/dzice/">dz_ice</a>
</div>
<div class="site-card">
<img no-lazy="" class="avatar" src="https://pic.imgdb.cn/item/6305e74a16f2c2beb18cb8ec.png" onerror="javascript:this.classList.add('error');this.src='https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/image/2659360.svg';">
<a target="_blank" rel="noopener" href="http://eqvpkbz.github.io">Eqvpkbz</a>
</div>
<div class="site-card">
<img no-lazy="" class="avatar" src="https://pic.imgdb.cn/item/6305e64a16f2c2beb18c09cd.jpg" onerror="javascript:this.classList.add('error');this.src='https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/image/2659360.svg';">
<a target="_blank" rel="noopener" href="https://blog.marshuni.fun/">Marshuni</a>
</div>
</div>
<h2 class="no-number"> 技术大佬</h2>
<div class="site-list">
<div class="site-card">
<img no-lazy="" class="avatar" src="https://cdn.jsdelivr.net/gh/xaoxuu/assets@master/avatar/avatar.png" onerror="javascript:this.classList.add('error');this.src='https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/image/2659360.svg';">
<a target="_blank" rel="noopener" href="https://xaoxuu.com/ ">xaoxuu</a>
</div>
<div class="site-card">
<img no-lazy="" class="avatar" src="https://i.loli.net/2019/11/06/MkE9w4otnRLvCS6.png" onerror="javascript:this.classList.add('error');this.src='https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/image/2659360.svg';">
<a target="_blank" rel="noopener" href="https://riteme.site/ ">riteme’s site</a>
</div>
<div class="site-card">
<img no-lazy="" class="avatar" src="https://i.loli.net/2020/07/10/G3KHqZSag7NO4uv.jpg" onerror="javascript:this.classList.add('error');this.src='https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/image/2659360.svg';">
<a target="_blank" rel="noopener" href="https://cychan811.gitee.io/">CyChan811</a>
</div>
</div>


<style>
  @keyframes highlight-blink {
    0%, 100% { background-color: #e6e6e6; }
    50% { background-color: #d8d8d8; }
  }
  .katex-display {
    transition: background-color 0.3s ease;
    position: relative;
  }
  .katex-display .katex-html {
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .katex-display:target {

  }
  /* 这些样式依然需要，因为服务器端生成了对应的class */
  .formula-anchor {
    margin-left: auto;
    padding-left: 1em;
    text-decoration: none;
    color: inherit;
    flex-shrink: 0;
  }
  .formula-number {
    font-size: 0.8em;
    color: #6c757d;
  }

  /* 引用悬浮详情卡片样式（改为 fixed，避免滚动偏移） */
  .ref-hover-popup {
    position: fixed; /* was: absolute */
    display: none;
    pointer-events: auto; /* was: none，允许与卡片交互 */
    z-index: 10000;
    background: #fff;
    border: 1px solid #ddd;
    box-shadow: 0 4px 12px rgba(0,0,0,0.12);
    padding: 8px 10px;
    max-width: 380px;
    line-height: 1.4;
    font-size: 0.9em;
    color: #333;
    border-radius: 4px;
  }
  /* 在悬浮卡片中隐藏编号链接，只显示详情 */
  .ref-hover-popup .citation-number { display: none; }

  /* 新增：公式弹窗适配样式 */
  .ref-hover-popup.is-formula {
    max-width: min(90vw, 900px);
    overflow-x: auto;
  }
  /* 弹窗里隐藏公式锚点/编号，避免干扰阅读 */
  .ref-hover-popup .formula-anchor,
  .ref-hover-popup .formula-number {
    display: none;
  }
  /* 弹窗内压缩公式块的上下间距 */
  .ref-hover-popup .katex-display {
    margin: 0;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // 【已移除】公式编号和锚点的添加逻辑已移至 EJS 后端渲染。
    
    // 新增：寻找最近的可滚动祖先（纵向）
    function getScrollableAncestor(el) {
      let node = el && el.parentElement;
      while (node && node !== document.body && node !== document.documentElement) {
        const style = window.getComputedStyle(node);
        const overflowY = style.overflowY;
        if ((overflowY === 'auto' || overflowY === 'scroll') && node.scrollHeight > node.clientHeight) {
          return node;
        }
        node = node.parentElement;
      }
      return null;
    }

    // 更新：滚动目标元素到视口（或容器）正中
    function smoothScrollToCenter(el) {
      if (!el) return;
      // 优先使用原生 scrollIntoView，能自动滚动最近可滚动容器
      try {
        el.scrollIntoView({ behavior: 'smooth', block: 'center', inline: 'nearest' });
        return;
      } catch (e) {
        // ignore, 使用回退
      }

      const container = getScrollableAncestor(el);
      if (container) {
        const elRect = el.getBoundingClientRect();
        const cRect = container.getBoundingClientRect();
        const current = container.scrollTop;
        const target = current + (elRect.top - cRect.top) - Math.max(0, (container.clientHeight - elRect.height) / 2);
        container.scrollTo({ top: Math.max(0, target), behavior: 'smooth' });
      } else {
        const rect = el.getBoundingClientRect();
        const vh = window.innerHeight || document.documentElement.clientHeight;
        const doc = document.documentElement;
        const body = document.body;
        const scrollTop = window.pageYOffset || doc.scrollTop || body.scrollTop || 0;
        const target = scrollTop + rect.top - Math.max(0, (vh - rect.height) / 2);
        const maxScroll = Math.max(0, (Math.max(doc.scrollHeight, body.scrollHeight) - vh));
        window.scrollTo({ top: Math.min(Math.max(0, target), maxScroll), behavior: 'smooth' });
      }
    }

    // 高亮函数（处理公式和引用）
    function highlightReference(hash) {
      // 清除之前的高亮
      const allCitations = document.querySelectorAll('.bibtexentry');
      allCitations.forEach(citation => {
        citation.style.backgroundColor = '';
        citation.style.animation = '';
      });
      
      const allFormulas = document.querySelectorAll('.katex-html');
      allFormulas.forEach(formula => {
        formula.style.backgroundColor = '';
        formula.style.animation = '';
      });
      
      // 使用传入的hash或当前URL的hash
      const targetHash = hash || window.location.hash;
      
      // 处理引用高亮
      if (targetHash && targetHash.startsWith('#ref')) {
        const targetElement = document.querySelector(targetHash);
        if (targetElement) {
          const citationElement = targetElement.closest('.bibtexentry');
          if (citationElement) {
            citationElement.style.backgroundColor = '#e6e6e6';
            citationElement.style.animation = 'highlight-blink 2s ease-in-out 3';
            // 原：citationElement.scrollIntoView({ behavior: 'smooth' });
            smoothScrollToCenter(citationElement);
          }
        }
      }
      
      // 处理公式高亮
      else if (targetHash && targetHash.startsWith('#formula')) {
        const targetElement = document.querySelector(targetHash);
        if (targetElement) {
          const formulaScrollElement = targetElement.closest('.katex-block, .katex-display'); // 适配两种可能的父容器
          const formulaElement = targetElement.closest('.katex-html');
          if (formulaElement && formulaScrollElement) {
            formulaElement.style.backgroundColor = '#e6e6e6';
            formulaElement.style.paddingTop = '0.6em';
            formulaElement.style.animation = 'highlight-blink 2s ease-in-out 3';
            // 原：formulaScrollElement.scrollIntoView({ behavior: 'smooth' });
            smoothScrollToCenter(formulaScrollElement);
          }
        }
      }

      else {
        try {
            const targetElement = document.querySelector(targetHash);
            if (targetElement) {
                // 原：targetElement.scrollIntoView({ behavior: 'smooth' });
                smoothScrollToCenter(targetElement);
            }
        } catch (e) {
            console.error('Invalid selector for scroll:', targetHash);
        }
      }
    }
    
    // 延迟检查hash，确保所有内容都已渲染
    setTimeout(function() {
      highlightReference();
    }, 600);
    
    // 监听hash变化
    window.addEventListener('hashchange', function() {
      highlightReference();
    });
    
    // 拦截页面内的链接点击
    document.addEventListener('click', function(e) {
      const link = e.target.closest('a');
      if (link && link.getAttribute('href')) {
        const href = link.getAttribute('href');
        // 只拦截指向本文内锚点的链接
        if (href.startsWith('#')) {
          e.preventDefault();
          const hash = href;
          // 更新URL但不触发默认跳转
          history.pushState(null, null, hash);
          // 执行平滑滚动和高亮
          highlightReference(hash);
        }
      }
    });
    
    // 引用悬浮详情卡片
    const refPopup = document.createElement('div');
    refPopup.className = 'ref-hover-popup';
    document.body.appendChild(refPopup);

    let currentRefLink = null;
    let hoverOnPopup = false;
    let hideTimer = null;

    function clearHideTimer() {
      if (hideTimer) {
        clearTimeout(hideTimer);
        hideTimer = null;
      }
    }

    function scheduleHide() {
      clearHideTimer();
      hideTimer = setTimeout(() => {
        if (!hoverOnPopup) {
          hideRefPopup();
        }
      }, 120); // 短延时，允许从链接移动到卡片
    }

    function getCitationHtmlByHash(hash) {
      if (!hash || !hash.startsWith('#ref')) return null;
      const target = document.querySelector(hash);
      if (!target) return null;
      const entry = target.closest('.bibtexentry');
      if (!entry) return null;
      const clone = entry.cloneNode(true);
      const num = clone.querySelector('.citation-number');
      if (num) num.remove();
      return clone.innerHTML;
    }

    /* 新增：根据 #formulaN 生成弹窗 HTML */
    function getFormulaHtmlByHash(hash) {
      if (!hash || !hash.startsWith('#formula')) return null;
      const target = document.querySelector(hash);
      if (!target) return null;
      const container = target.closest('.katex-block, .katex-display');
      if (!container) return null;
      const clone = container.cloneNode(true);
      // 弹窗中隐藏锚点与编号
      const anchor = clone.querySelector('.formula-anchor');
      if (anchor) anchor.remove();
      const num = clone.querySelector('.formula-number');
      if (num) num.remove();
      return clone.outerHTML;
    }

    /* 新增：根据链接位置定位弹窗，限制在视口内 */
    function positionPopupAtLink(link) {
      const margin = 8;
      refPopup.style.visibility = 'hidden';
      refPopup.style.display = 'block';

      const rects = link.getClientRects();
      const linkRect = rects.length ? rects[rects.length - 1] : link.getBoundingClientRect();
      const popupRect = refPopup.getBoundingClientRect();
      const vw = document.documentElement.clientWidth;
      const vh = document.documentElement.clientHeight;

      let left = linkRect.left;
      let top = linkRect.bottom + margin; // 默认下方

      if (left + popupRect.width > vw - margin) {
        left = Math.max(margin, vw - popupRect.width - margin);
      }
      if (top + popupRect.height > vh - margin) {
        top = linkRect.top - popupRect.height - margin; // 放到上方
      }
      if (left < margin) left = margin;
      if (top < margin) top = Math.min(vh - popupRect.height - margin, linkRect.bottom + margin);

      refPopup.style.left = left + 'px';
      refPopup.style.top = top + 'px';
      refPopup.style.visibility = '';
    }

    function showRefPopup(link) {
      const href = link.getAttribute('href');
      let html = null;
      let isFormula = false;

      if (href.startsWith('#ref')) {
        html = getCitationHtmlByHash(href);
      } else if (href.startsWith('#formula')) {
        html = getFormulaHtmlByHash(href);
        isFormula = true;
      }

      if (!html) return;
      clearHideTimer();
      refPopup.classList.toggle('is-formula', isFormula);
      refPopup.innerHTML = html;
      positionPopupAtLink(link);
      refPopup.style.display = 'block';
    }

    function hideRefPopup() {
      refPopup.style.display = 'none';
      refPopup.innerHTML = '';
      currentRefLink = null;
      clearHideTimer();
    }

    // 允许在卡片上悬停，避免消失
    refPopup.addEventListener('mouseenter', () => {
      hoverOnPopup = true;
      clearHideTimer();
    });
    refPopup.addEventListener('mouseleave', () => {
      hoverOnPopup = false;
      scheduleHide();
    });

    // 新增：过滤仅保留“正文中作者写的”引用/公式链接
    function isUserAuthoredRefLink(link) {
      const href = link.getAttribute('href') || '';
      if (!href.startsWith('#ref')) return false;
      // 排除引用列表里的编号链接与其容器
      if (link.closest('.citation-number')) return false;
      if (link.closest('.bibtexentry')) return false;
      return true;
    }
    function isUserAuthoredFormulaLink(link) {
      const href = link.getAttribute('href') || '';
      if (!href.startsWith('#formula')) return false;
      // 排除自动生成在公式后的锚点与其容器
      if (link.classList.contains('formula-anchor')) return false;
      if (link.closest('.katex-display') || link.closest('.katex-block')) return false;
      return true;
    }

    // 替换：绑定到具体的 #refN 链接（排除自动生成）
    const refLinks = Array.from(document.querySelectorAll('.article a[href^="#ref"]')).filter(isUserAuthoredRefLink);
    refLinks.forEach(link => {
      link.addEventListener('mouseenter', () => {
        currentRefLink = link;
        hoverOnPopup = false;
        showRefPopup(link);
      });
      link.addEventListener('mouseleave', () => {
        scheduleHide();
      });
    });

    // 替换：绑定到具体的 #formulaN 链接（排除自动生成）
    const formulaLinks = Array.from(document.querySelectorAll('.article a[href^="#formula"]')).filter(isUserAuthoredFormulaLink);
    formulaLinks.forEach(link => {
      link.addEventListener('mouseenter', () => {
        currentRefLink = link;
        hoverOnPopup = false;
        showRefPopup(link);
      });
      link.addEventListener('mouseleave', () => {
        scheduleHide();
      });
    });

    // 滚动或窗口变化时隐藏，避免错位
    window.addEventListener('scroll', hideRefPopup, { passive: true });
    window.addEventListener('resize', hideRefPopup);
  });
</script>


</div>
<p class="right">
    
</p>
            <!-- </div> -->
            <div class="row mt-2">
    
    <p id="copyright">
        
        除非另有声明，本博客所有内容均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议
        <span class="d-none d-sm-inline"> | </span>
                
        <a href="/atom.xml" target="_blank" rel="noopener" class="btn btn-outline-secondary btn-sm">RSS 订阅</a> <span class="d-none d-sm-inline"> | </span>
        <a href="/friends">友链</a>
        <br>

        <a target="_blank" rel="noopener" href="https://beian.miit.gov.cn">鄂ICP备2025091178号</a> <span class="d-none d-sm-inline"> | </span>
        


        


    
        
            <a href="/friends/index.html">English</a>
        
    

    </p>

    <script type="text/javascript" id="clustrmaps" src="//cdn.clustrmaps.com/map_v2.js?cl=ffffff&amp;w=250&amp;t=n&amp;d=tomGCTh1CxWc_-uuNllmA6Nl5mVnvkzy2svb86OrEyc&amp;co=2d78ad&amp;cmo=3acc3a&amp;cmn=ff5353&amp;ct=ffffff"></script>
    
    
</div> 
          </div>
    
        </div>
    
      </div>


</body></html>